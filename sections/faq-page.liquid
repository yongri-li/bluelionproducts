<div class="
  {% if section.settings.container %} container {% else %} container-fluid {% endif %}
  {{ section.settings.margin_top | prepend: 'mt-' }}
  {{ section.settings.margin_bottom | prepend: 'mb-' }}
  {{ section.settings.padding_top | prepend: 'pt-' }}
  {{ section.settings.padding_bottom | prepend: 'pb-' }}
  {{ section.settings.bg_color }}
">
  {% if section.settings.heading != blank %}
    <{{ section.settings.heading_size }}  class="{{ section.settings.heading_alignment }}">
      {{ section.settings.heading | escape }}
    </{{ section.settings.heading_size }}>
  {% endif %}
  {% if section.settings.subheading != blank %}
    <div class="rte text-muted {{ section.settings.heading_alignment }}">
      {{ section.settings.subheading }}
    </div>
  {% endif %}
<div id="accordion-{{ section.id }}" class="accordion" >
  {% for block in section.blocks %}
  {% if block.settings.category != blank %}
    <{{ block.settings.heading_size }}  class="{{ block.settings.heading_alignment }} {{ block.settings.heading_size }}">
      {{ block.settings.category | escape }}
    </{{ block.settings.heading_size }}>
  {% endif %}
  {% if block.settings.subheading != blank %}
    <div class="rte text-muted {{ block.settings.heading_alignment }}">
      {{ block.settings.subheading }}
    </div>
  {% endif %}
    <div class="card mb-2">
      <div class="card-header bg-white mb-0" id="heading-{{ block.id }}">
        <h3 class="mb-0">
          <button class="btn btn-link btn-block text-left text-decoration-none py-3 px-3" type="button" data-toggle="collapse" data-target="#collapse-{{ block.id }}" aria-expanded="{% if block.settings.open %}true{% else %}false{% endif %}" aria-controls="collapse-{{ block.id }}">
            {{ block.settings.title | escape }}
          </button>
        </h3>
      </div>
      <div id="collapse-{{ block.id }}" class="collapse {% if block.settings.open %}show{% endif %}" aria-labelledby="heading-{{ block.id }}" data-parent="#accordion-{{ section.id }}">
        <div class="card-body">
          {{ block.settings.content }}
        </div>
      </div>
    </div>
  {% endfor %}
</div>
</div>
{% schema %}
  {
    "name": "Accordion",
    "class": "FAQ-list",
    "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading text",
      "default": "Frequently Asked Questions"
    },
    {
      "type": "richtext",
      "id": "subheading",
      "label": "Subheading text",
      "default": "<p>Write something catchy here.</p>"
    },
    {
      "type": "header",
      "content": "General settings"
    },
    {
      "type": "checkbox",
      "id": "container",
      "label": "Wrap in container",
      "default": true
    },
    {
      "type": "select",
      "id": "heading_size",
      "label": "Heading Size",
      "default": "h2",
      "options": [
        {
          "value": "h1", "label": "H1"
        },
        {
          "value": "h2", "label": "H2"
        },
        {
          "value": "h3", "label": "H3"
        },
        {
          "value": "h4", "label": "H4"
        },
        {
          "value": "h5", "label": "H5"
        },
        {
          "value": "h6", "label": "H6"
        }
      ]
    },
    {
      "type": "select",
      "id": "heading_alignment",
      "label": "Heading alignment",
      "default": "text-left",
      "options": [
        {
          "value": "text-left", "label": "Left"
        },
        {
          "value": "text-center", "label": "Center"
        },
        {
          "value": "text-right", "label": "Right"
        }
      ]
    },
    {
      "type": "select",
      "id": "bg_color",
      "label": "Background Color",
      "options": [
        {
          "value": "bg-white text-muted", "label": "White"
        },
        {
          "value": "bg-light text-muted", "label": "Light"
        },
        {
          "value": "bg-dark text-light", "label": "Dark"
        },
        {
          "value": "bg-primary text-light", "label": "Primary"
        },
        {
          "value": "", "label": "None"
        }
      ],
      "default": "bg-dark text-light"
    },
    {
      "type": "header",
      "content": "Spacing"
    },
    {
      "type": "paragraph",
      "content": "Based on Bootstrap spacing utility classes [Learn more](https://getbootstrap.com/docs/4.5/utilities/spacing/)"
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "Padding top",
      "min": 0,
      "max": 12,
      "step": 1,
      "default": 6
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "Padding bottom",
      "min": 0,
      "max": 12,
      "step": 1,
      "default": 3
    },
    {
      "type": "range",
      "id": "margin_top",
      "label": "Margin top",
      "min": 0,
      "max": 12,
      "step": 1,
      "default": 0
    },
    {
      "type": "range",
      "id": "margin_bottom",
      "label": "Margin bottom",
      "min": 0,
      "max": 12,
      "step": 1,
      "default": 0
    }
    ],
    "blocks": [
      {
      "type": "text",
      "name": "Item",
      "settings": [
      {
        "type": "checkbox",
        "id": "open",
        "label": "Open by default?",
        "default": false
      },
      {
        "type": "text",
        "id": "category",
        "label": "Add a category"
      },
      {
        "type": "richtext",
        "id": "subheading",
        "label": "Include sub text for your category"
      },
      {
        "type": "select",
        "id": "heading_alignment",
        "label": "Category alignment",
        "default": "text-left",
        "options": [
          {
            "value": "text-left", "label": "Left"
          },
          {
            "value": "text-center", "label": "Center"
          },
          {
            "value": "text-right", "label": "Right"
          }
        ]
      },
      {
        "type": "select",
        "id": "heading_size",
        "label": "Heading Size",
        "default": "h2",
        "options": [
          {
            "value": "h1", "label": "H1"
          },
          {
            "value": "h2", "label": "H2"
          },
          {
            "value": "h3", "label": "H3"
          },
          {
            "value": "h4", "label": "H4"
          },
          {
            "value": "h5", "label": "H5"
          },
          {
            "value": "h6", "label": "H6"
          }
        ]
        },
        {
          "type": "text",
          "id": "title",
          "label": "Question"
        },
        {
          "type": "richtext",
          "id": "content",
          "label": "Answer"
        }
      ]
     }
    ]
  }
{% endschema %}
<style>
.accordion .card .card-header button[aria-expanded="true"]:before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' class='icon-chevrons-up' width='{{ size | default: 24 }}'  height='{{ size | default: 24 }}' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M17 11l-5-5-5 5M17 18l-5-5-5 5' /%3E%3C/svg%3E ");
    transition: all .25s ease-out;
}

.accordion .card .card-header button[aria-expanded="false"]:before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' class='icon-chevrons-down' width='{{ size | default: 24 }}'  height='{{ size | default: 24 }}' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M7 13l5 5 5-5M7 6l5 5 5-5' /%3E%3C/svg%3E");
    transition: all .25s ease-out;
}

.accordion .card .card-header button:before {
    position: absolute;
    right: 7px;
    top: 15px;
    display: block;
    display: inline-block;
    padding-right: 3px;
    vertical-align: middle;
    color: #405189;
    transition: all .25s ease-out;
}
</style>
